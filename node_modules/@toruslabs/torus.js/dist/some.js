"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Some = void 0;

var Some = function Some(promises, predicate) {
  return new Promise(function (resolve, reject) {
    var finishedCount = 0;
    var resolved = false;
    var resultArr = new Array(promises.length).fill(undefined);
    promises.forEach(function (x, index) {
      x.then(function (resp) {
        resultArr[index] = resp;
      })["catch"](function (_) {})["finally"](function () {
        if (resolved) return;
        predicate(resultArr.slice(0)).then(function (data) {
          resolved = true;
          resolve(data);
        })["catch"](function (_) {})["finally"](function (_) {
          finishedCount++;

          if (finishedCount === promises.length) {
            reject(new Error('Unable to resolve enough promises, responses: ' + JSON.stringify(resultArr)));
          }
        });
      });
    });
  });
};

exports.Some = Some;