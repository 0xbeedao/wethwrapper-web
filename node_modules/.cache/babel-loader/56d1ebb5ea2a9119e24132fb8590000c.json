{"ast":null,"code":"var _jsxFileName = \"/Users/vengist/environments/raid/wethwrapper-web/src/components/WithdrawForm.js\";\nimport React, { useContext } from \"react\";\nimport { Formik } from \"formik\";\nimport { Form } from \"react-bootstrap\";\nimport { Web3ConnectContext, CurrentUserContext, ContractContext } from \"../contexts/Store\";\nimport { DepositSchema } from \"./Validation\";\nimport { CONTAINER, DEPOSITFORM, BUTTON } from \"./Form.styled\";\nimport { TokenInfo } from \"./TokenInfo\";\nexport const WithdrawForm = () => {\n  const [web3Connect] = useContext(Web3ConnectContext);\n  const [currentUser, setCurrentUser] = useContext(CurrentUserContext);\n  const [contract] = useContext(ContractContext);\n  return React.createElement(CONTAINER, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, React.createElement(Formik, {\n    initialValues: {\n      amount: 0\n    },\n    validationSchema: DepositSchema,\n    onSubmit: async (values, {\n      setSubmitting,\n      resetForm\n    }) => {\n      setSubmitting(true);\n\n      try {\n        const weiValue = web3Connect.web3.utils.toWei(\"\" + values.amount);\n        await contract.methods.withdraw(weiValue).send({\n          from: currentUser.username\n        });\n        setCurrentUser({ ...currentUser,\n          ...{\n            wethBalance: +currentUser.wethBalance - values.amount\n          }\n        });\n      } catch (err) {\n        console.log(err);\n      } finally {\n        setSubmitting(false);\n        resetForm();\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, ({\n    values,\n    errors,\n    touched,\n    handleChange,\n    handleBlur,\n    handleSubmit,\n    isSubmitting\n  }) => React.createElement(DEPOSITFORM, {\n    onSubmit: handleSubmit,\n    className: \"mx-auto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(Form.Group, {\n    controlId: \"depositForm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Amount of wETH to Unwrap\"), React.createElement(TokenInfo, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }), React.createElement(Form.Control, {\n    type: \"number\",\n    name: \"amount\",\n    placeholder: \"Amount to wrap\",\n    value: values.amount,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    size: \"lg\",\n    className: touched.amount && errors.amount ? \"error\" : null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), touched.amount && errors.amount ? React.createElement(\"div\", {\n    className: \"error-message\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, errors.amount) : null), React.createElement(BUTTON, {\n    variant: \"primary\",\n    type: \"submit\",\n    size: \"lg\",\n    block: true,\n    disabled: isSubmitting,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, isSubmitting ? \"Loading…\" : \"Submit\"))));\n};","map":{"version":3,"sources":["/Users/vengist/environments/raid/wethwrapper-web/src/components/WithdrawForm.js"],"names":["React","useContext","Formik","Form","Web3ConnectContext","CurrentUserContext","ContractContext","DepositSchema","CONTAINER","DEPOSITFORM","BUTTON","TokenInfo","WithdrawForm","web3Connect","currentUser","setCurrentUser","contract","amount","values","setSubmitting","resetForm","weiValue","web3","utils","toWei","methods","withdraw","send","from","username","wethBalance","err","console","log","errors","touched","handleChange","handleBlur","handleSubmit","isSubmitting"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\n\nimport { Formik } from \"formik\";\nimport { Form } from \"react-bootstrap\";\n\nimport {\n  Web3ConnectContext,\n  CurrentUserContext,\n  ContractContext,\n} from \"../contexts/Store\";\n\nimport { DepositSchema } from \"./Validation\";\nimport { CONTAINER, DEPOSITFORM, BUTTON } from \"./Form.styled\";\nimport { TokenInfo } from \"./TokenInfo\";\n\nexport const WithdrawForm = () => {\n  const [web3Connect] = useContext(Web3ConnectContext);\n  const [currentUser, setCurrentUser] = useContext(CurrentUserContext);\n  const [contract] = useContext(ContractContext);\n\n  return (\n    <CONTAINER>\n      <Formik\n        initialValues={{\n          amount: 0,\n        }}\n        validationSchema={DepositSchema}\n        onSubmit={async (values, { setSubmitting, resetForm }) => {\n          setSubmitting(true);\n          try {\n            const weiValue = web3Connect.web3.utils.toWei(\"\" + values.amount);\n            await contract.methods\n              .withdraw(weiValue)\n              .send({ from: currentUser.username });\n            setCurrentUser({\n              ...currentUser,\n              ...{ wethBalance: +currentUser.wethBalance - values.amount },\n            });\n          } catch (err) {\n            console.log(err);\n          } finally {\n            setSubmitting(false);\n            resetForm();\n          }\n        }}\n      >\n        {({\n          values,\n          errors,\n          touched,\n          handleChange,\n          handleBlur,\n          handleSubmit,\n          isSubmitting,\n        }) => (\n          <DEPOSITFORM onSubmit={handleSubmit} className=\"mx-auto\">\n            <Form.Group controlId=\"depositForm\">\n              <Form.Label>Amount of wETH to Unwrap</Form.Label>\n              <TokenInfo />\n              <Form.Control\n                type=\"number\"\n                name=\"amount\"\n                placeholder=\"Amount to wrap\"\n                value={values.amount}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                size=\"lg\"\n                className={touched.amount && errors.amount ? \"error\" : null}\n              />\n              {touched.amount && errors.amount ? (\n                <div className=\"error-message\">{errors.amount}</div>\n              ) : null}\n            </Form.Group>\n            <BUTTON\n              variant=\"primary\"\n              type=\"submit\"\n              size=\"lg\"\n              block\n              disabled={isSubmitting}\n            >\n              {isSubmitting ? \"Loading…\" : \"Submit\"}\n            </BUTTON>\n          </DEPOSITFORM>\n        )}\n      </Formik>\n    </CONTAINER>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}